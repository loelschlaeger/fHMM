<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="fHMM">
<title>Data management • fHMM</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Data management">
<meta property="og:description" content="fHMM">
<meta property="og:image" content="https://loelschlaeger.github.io/fHMM/logo.svg">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">fHMM</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/fHMM.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/v01_model_definition.html">Model definition</a>
    <a class="dropdown-item" href="../articles/v02_controls.html">Controls</a>
    <a class="dropdown-item" href="../articles/v03_data_management.html">Data management</a>
    <a class="dropdown-item" href="../articles/v04_model_estimation.html">Model estimation</a>
    <a class="dropdown-item" href="../articles/v05_state_decoding_and_prediction.html">State decoding and prediction</a>
    <a class="dropdown-item" href="../articles/v06_model_checking.html">Model checking</a>
    <a class="dropdown-item" href="../articles/v07_model_selection.html">Model selection</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/loelschlaeger/fHMM/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="v03_data_management_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <main id="main"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Data management</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/loelschlaeger/fHMM/blob/HEAD/vignettes/v03_data_management.Rmd" class="external-link"><code>vignettes/v03_data_management.Rmd</code></a></small>
      <div class="d-none name"><code>v03_data_management.Rmd</code></div>
    </div>

    
    
<p>This vignette<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;This vignette was build using R 4.1.3 with the {fHMM} 1.0.0 package.&lt;/p&gt;"><sup>1</sup></a> explains how to prepare or simulate data in {fHMM} for estimation.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://loelschlaeger.de/fHMM/" class="external-link">fHMM</a></span><span class="op">)</span>
<span class="co">#&gt; Thanks for using {fHMM} version 1.0.0!</span>
<span class="co">#&gt; See https://loelschlaeger.de/fHMM for help.</span>
<span class="co">#&gt; Type 'citation("fHMM")' for citing this R package.</span></code></pre></div>
<div class="section level2">
<h2 id="empirical-data">Empirical data<a class="anchor" aria-label="anchor" href="#empirical-data"></a>
</h2>
<p>Empirical data must be provided as a comma-separated values (CSV) file and its path must be specified in <code><a href="../reference/set_controls.html">set_controls()</a></code>, see <a href="http://loelschlaeger.de/fHMM/articles/v02_controls.html" class="external-link">the vignette on specifying the controls</a> for details.<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;The &lt;code&gt;&lt;a href="../reference/download_data.html"&gt;download_data()&lt;/a&gt;&lt;/code&gt; function explained below provides a convenient tool for downloading stock data from &lt;a href="https://www.yahoo.com/finance" class="external-link uri"&gt;https://www.yahoo.com/finance&lt;/a&gt; in csv-format.&lt;/p&gt;'><sup>2</sup></a> The {fHMM} package comes with two datasets of the Deutscher Aktienindex and the VW stock for demonstration purpose that can be accessed as follows:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"dax.csv"</span>, package <span class="op">=</span> <span class="st">"fHMM"</span><span class="op">)</span>
<span class="co">#&gt; [1] "/Users/runner/work/_temp/Library/fHMM/extdata/dax.csv"</span>
<span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"vw.csv"</span>, package <span class="op">=</span> <span class="st">"fHMM"</span><span class="op">)</span>
<span class="co">#&gt; [1] "/Users/runner/work/_temp/Library/fHMM/extdata/vw.csv"</span></code></pre></div>
<p>The <code><a href="../reference/prepare_data.html">prepare_data()</a></code> function prepares the data based on the <code>data</code> controls specifications and returns an <code>fHMM_data</code> object that can be passed to the <code><a href="../reference/fit_model.html">fit_model()</a></code> function for model fitting.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">controls</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>
  states <span class="op">=</span> <span class="fl">3</span>,
  sdds   <span class="op">=</span> <span class="st">"t"</span>,
  data   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>file        <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"dax.csv"</span>, package <span class="op">=</span> <span class="st">"fHMM"</span><span class="op">)</span>,
                date_column <span class="op">=</span> <span class="st">"Date"</span>,
                data_column <span class="op">=</span> <span class="st">"Close"</span>,
                logreturns  <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="op">)</span>
<span class="va">controls</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/set_controls.html">set_controls</a></span><span class="op">(</span><span class="va">controls</span><span class="op">)</span>
<span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/prepare_data.html">prepare_data</a></span><span class="op">(</span><span class="va">controls</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span>
<span class="co">#&gt; Summary of fHMM empirical data</span>
<span class="co">#&gt; * number of observations: 8778 </span>
<span class="co">#&gt; * data source: dax.csv </span>
<span class="co">#&gt; * date column: Date </span>
<span class="co">#&gt; * log returns: TRUE</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="download-stock-data">Download stock data<a class="anchor" aria-label="anchor" href="#download-stock-data"></a>
</h2>
<p>Daily stock prices listed on <a href="https://finance.yahoo.com/" class="external-link uri">https://finance.yahoo.com/</a> can be downloaded directly via</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/download_data.html">download_data</a></span><span class="op">(</span><span class="va">symbol</span>, <span class="va">from</span>, <span class="va">to</span>, <span class="va">file</span><span class="op">)</span></code></pre></div>
<p>where</p>
<ul>
<li><p><code>symbol</code> is the stock’s symbol that has to match the official symbol on <a href="https://finance.yahoo.com" class="external-link uri">https://finance.yahoo.com</a>,<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;For example, &lt;code&gt;"^GDAXI"&lt;/code&gt; is the symbol of the DAX and &lt;code&gt;"^GSPC"&lt;/code&gt; the one of the S&amp;amp;P 500.&lt;/p&gt;'><sup>3</sup></a></p></li>
<li><p><code>from</code> and <code>to</code> define the time interval (in format <code>"YYYY-MM-DD"</code>),</p></li>
<li><p><code>file</code> is the name of the file where the .csv-file is saved. Per default, it is saved in the current working directory under the name <code>&lt;symbol&gt;.csv</code>.</p></li>
</ul>
<p>For example, the call</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/download_data.html">download_data</a></span><span class="op">(</span>symbol <span class="op">=</span> <span class="st">"^GDAXI"</span>, from <span class="op">=</span> <span class="st">"2000-01-01"</span>, to <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.Date</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; Download successful.</span>
<span class="co">#&gt; * symbol: ^GDAXI </span>
<span class="co">#&gt; * from: 2000-01-03 </span>
<span class="co">#&gt; * to: 2022-04-01 </span>
<span class="co">#&gt; * path: /Users/runner/work/fHMM/fHMM/vignettes/^GDAXI.csv</span></code></pre></div>
<p>downloads the 21st century daily data of the DAX into the current working directory.</p>
</div>
<div class="section level2">
<h2 id="highlighting-events">Highlighting events<a class="anchor" aria-label="anchor" href="#highlighting-events"></a>
</h2>
<p>Historical events can be highlighted by specifying a named list <code>events</code> with elements <code>dates</code> (a vector of dates) and <code>labels</code> (a vector of labels for the events) and passing it to the plot method, for example:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">events</span> <span class="op">&lt;-</span> <span class="fu">fHMM</span><span class="fu">:::</span><span class="fu"><a href="../reference/fHMM_events.html">fHMM_events</a></span><span class="op">(</span>
  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>
    dates <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2001-09-11"</span>,<span class="st">"2008-09-15"</span>,<span class="st">"2020-01-27"</span><span class="op">)</span>,
    labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"9/11 terrorist attack"</span>,<span class="st">"Bankruptcy of Lehman Brothers"</span>,<span class="st">"First COVID-19 case in Germany"</span><span class="op">)</span>
    <span class="op">)</span>
  <span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">events</span><span class="op">)</span>
<span class="co">#&gt;        dates                         labels</span>
<span class="co">#&gt; 1 2001-09-11          9/11 terrorist attack</span>
<span class="co">#&gt; 2 2008-09-15  Bankruptcy of Lehman Brothers</span>
<span class="co">#&gt; 3 2020-01-27 First COVID-19 case in Germany</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">data</span>, events <span class="op">=</span> <span class="va">events</span><span class="op">)</span></code></pre></div>
<p><img src="v03_data_management_files/figure-html/events-1.png" width="80%" style="display: block; margin: auto;"></p>
</div>
<div class="section level2">
<h2 id="simulated-data">Simulated data<a class="anchor" aria-label="anchor" href="#simulated-data"></a>
</h2>
<p>If the <code>data</code> parameter in the model’s <code>controls</code> is unspecified, the model is fitted to simulated data from the model specification. This can be useful for testing the functionality or conducting simulation experiments. True model parameters can be specified by defining an <code>fHMM_parameters</code>-object via the <code><a href="../reference/fHMM_parameters.html">fHMM_parameters()</a></code> function and passing it to <code><a href="../reference/prepare_data.html">prepare_data()</a></code>.</p>
</div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by <a href="https://loelschlaeger.de" class="external-link">Lennart Oelschläger</a>, <a href="https://timoadam.github.io/" class="external-link">Timo Adam</a>, <a href="https://ekvv.uni-bielefeld.de/pers_publ/publ/PersonDetail.jsp?personId=241029889" class="external-link">Rouven Michels</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
